/*
 * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one
 * or more contributor license agreements. Licensed under the Elastic License
 * 2.0; you may not use this file except in compliance with the Elastic License
 * 2.0.
 */

import React from 'react';
import {
  Chart,
  Settings,
  Axis,
  BarSeries,
  timeFormatter,
  niceTimeFormatByDay,
} from '@elastic/charts';
import { getSeverityStatusColor } from '../../common/utils/get_vulnerability_colors';
import { ChartPanel } from '../../components/chart_panel';
import { SEVERITY } from '../../../common/constants';

const data = [
  { critical: 4400, high: 3000, medium: 2000, low: 1000, time: 1 },
  { critical: 1000, high: 2000, medium: 2000, low: 1000, time: 2 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 3 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 4 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 5 },
  { critical: 4000, high: 2000, medium: 2000, low: 1000, time: 6 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 7 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 8 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 9 },
  { critical: 4000, high: 1000, medium: 2000, low: 1000, time: 10 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 11 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 12 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 13 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 14 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 15 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 16 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 17 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 18 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 19 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 20 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 21 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 22 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 23 },
  { critical: 4000, high: 3000, medium: 2000, low: 1000, time: 24 },
];

const stackAccessors = [SEVERITY.CRITICAL, SEVERITY.HIGH, SEVERITY.MEDIUM, SEVERITY.LOW];

export const VulnerabilityTrendGraph = () => {
  return (
    <ChartPanel title={'Trend by Severity'}>
      <div style={{ width: '100%', height: 300 }}>
        <Chart>
          <Settings
            legendPosition="right"
            showLegend
            theme={{
              scales: {
                barsPadding: 0.05,
              },
            }}
          />

          {/* {useCustomTooltip && <Tooltip customTooltip={CustomTooltipWithSubChart} type="follow" />}*/}

          <Axis
            id="bottom"
            // position={Position.Bottom}
            position={'bottom'}
            tickFormat={timeFormatter(niceTimeFormatByDay(2))}
            // showOverlappingTicks={boolean('showOverlappingTicks bottom axis', false)}
            // showOverlappingLabels={boolean('showOverlappingLabels bottom axis', false)}
            // tickFormat={formatter}
          />
          <Axis
            id="left2"
            position={'left'}
            tickFormat={(number: any) =>
              number.toLocaleString(undefined, {
                notation: 'compact',
                maximumFractionDigits: 1,
              })
            }
          />

          {/* <BarSeries*/}
          {/*  id={'KIBANA_METRICS.metrics.kibana_os_load.v3.metric.label'}*/}
          {/*  // xScaleType={ScaleType.Time}*/}
          {/*  // yScaleType={ScaleType.Linear}*/}
          {/*  xAccessor={0}*/}
          {/*  yAccessors={[1]}*/}
          {/*  stackAccessors={[0]}*/}
          {/*  data={data}*/}
          {/*  xScaleType="time"*/}
          {/*  xAccessor={'timestamp'}*/}
          {/*  yAccessors={['postureScore']}*/}
          {/* />*/}
          {/* <BarSeries*/}
          {/*  id={'KIBANA_METRICS.metrics.kibana_os_load.v2.metric.label'}*/}
          {/*  // xScaleType={ScaleType.Time}*/}
          {/*  // yScaleType={ScaleType.Linear}*/}
          {/*  xAccessor={0}*/}
          {/*  yAccessors={[1]}*/}
          {/*  stackAccessors={[0]}*/}
          {/*  data={data}*/}
          {/* />*/}
          <BarSeries
            id={SEVERITY.CRITICAL}
            xAccessor={'time'}
            yAccessors={['critical']}
            stackAccessors={stackAccessors}
            data={data}
            color={getSeverityStatusColor(SEVERITY.CRITICAL)}
          />
          <BarSeries
            id={SEVERITY.HIGH}
            xAccessor={'time'}
            yAccessors={['high']}
            stackAccessors={stackAccessors}
            data={data}
            color={getSeverityStatusColor(SEVERITY.HIGH)}
          />
          <BarSeries
            id={SEVERITY.MEDIUM}
            xAccessor={'time'}
            yAccessors={['medium']}
            stackAccessors={stackAccessors}
            data={data}
            color={getSeverityStatusColor(SEVERITY.MEDIUM)}
          />
          <BarSeries
            id={SEVERITY.LOW}
            xAccessor={'time'}
            yAccessors={['low']}
            stackAccessors={stackAccessors}
            data={data}
            color={getSeverityStatusColor(SEVERITY.LOW)}
          />
        </Chart>
      </div>
    </ChartPanel>
  );
};
